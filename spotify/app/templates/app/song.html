{% extends 'app/base.html' %} {% block content %}
<section class="AddSongAndArtist">
  <div class="overlay">
    <div class="popupmodal"></div>
  </div>

  <div class="container">
    <form action="" method="POST" id="songform" enctype='multipart/form-data'>
      {% csrf_token %}
      
        <div class="form-outline mb-4">
            {{form.artists}}
            <label class="form-label" for="formartist">artist</label>
        </div>
        <input type="button" value="add">
        <button>hi</button>
        <!-- Password input -->
        <div class="form-outline mb-4">
            {{form.title}}
            <label class="form-label" for="formtitle">title</label>
        </div>

        
        <!-- 2 column grid layout for inline styling -->
        
        <div class="form-outline mb-4">
            {{form.date}}
            <label class="form-label" for="formdate">date</label>
        </div>
            
        <div class="form-outline mb-4">
            {{form.image}}
            <label class="form-label" for="formimage">image</label>
        </div>


  <!-- Submit button -->
  <button type="button" class="btn btn-primary">Sign in</button>
  <input class="btn btn-primary" type="submit" value="Save" />
  </div>

      
    </form>
  </div>
</section>
{% endblock %}
 {% block scripts %}
<script>
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== "") {
      const cookies = document.cookie.split(";");
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) === name + "=") {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
  $(document).ready(function () {
    $("#songform").submit(function (e) {
      e.preventDefault();
      var formData = new FormData(this);
      
      
      $.ajax({
        url: '{% url "createsong" %}',
        type: "POST",
        data: formData,

        success: function (data) {
          console.log("success"); // ... do something with the data...
        },
        cache: false,
        contentType: false,
        processData: false
      });
    });
  });
</script>

{% endblock %}
